{{ template "header" }}
<div class="hero fullscreen">
    <div class="hero-body u-center">
        <div class="w-90-tablet ygp-content" style="position: relative ">
            <div class="row level">
                <div class="col-8">
                    <h1 class="headline-4">It's a perfect place to generate podcast feed from YouTube!</h1>
                    <p class="lead">Just type your channel name below and you will get feed url. It's that simple!</p>

                    <div class="r">
                        <b>Pssst! Now audio in <div class="tag tag--link">BETA</div></b>
                    </div>

                    <space></space>
                    <form class="form-group" method="post" action="/">
                        <input type="search" name="q" placeholder="Enter YouTube channel name" />
                        <button class="form-group-btn btn-link">
                            Search
                        </button>
                    </form>
                    <space></space>
                    {{ template "list" .Channels }}
                    {{ template "feedUrl" .ChannelId }}
                </div>
                <div class="divider divider--v u-hide-mobile"></div>
            </div>
        </div>
    </div>
</div>
{{ template "footer" }}

{{ define "list" }}
    {{ if . }}
            <h5> Results: </h5>
            <space></space>
            {{ range . }}
                <a href="/?channelId={{ .ChannelId }}" class="tile padded ygp-channel-links">
                    <div class="tile__icon">
                        <figure class="avatar padded">
                            <img src="{{ .Thumbnail }}">
                        </figure>
                    </div>
                    <div class="tile__container">
                        <p class="tile__title u-no-margin">{{ .Title }}</p>
                        <p class="tile__subtitle u-no-margin">{{ .Description }}</p>
                        <span class="info">{{ .PublishedAt }}</span>
                    </div>
                </a>

                <space></space>
            {{ end }}
    {{ end }}
{{ end }}


{{ define "feedUrl" }}
    {{ if . }}
        <div class="r ygp-feed-url">
            <h5> Here is your feed url with audio  </h5>
            <p><small>Copy it to your podcast app and forget.</small></p>
        </div>
        <div class="form-group">
            <input type="url" id="feedUrl" value="{{ . }}" />
            <button onclick="copy()" class="form-group-btn btn-link">
                Copy
            </button>
        </div>
    {{ end }}
{{ end }}
